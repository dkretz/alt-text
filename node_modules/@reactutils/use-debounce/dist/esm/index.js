import{useRef as r,useEffect as n,useMemo as t,useCallback as u,useState as e}from"react";function c(u,e){var c=this,i=(e||{}).delay,a=r(null),o=r(0),f=r(null),l=r([]),m=r(),v=r(),p=r(u),d=r(!0);n((function(){p.current=u}),[u]);var w=!i&&0!==i&&"undefined"!=typeof window;if("function"!=typeof u)throw new TypeError("Expected a function");i=i?+i:0;var y=!!(e=e||{}).leading,h=!("trailing"in e)||!!e.trailing,s="maxWait"in e,x=s?Math.max(e.maxWait?+e.maxWait:0,i):null;n((function(){return d.current=!0,function(){d.current=!1}}),[]);var g=t((function(){var r=function(r){var n=l.current,t=m.current;return l.current=m.current=null,o.current=r,v.current=p.current.apply(t,n)},n=function(r,n){w&&cancelAnimationFrame(f.current),f.current=w?requestAnimationFrame(r):setTimeout(r,n)},t=function(r){if(!d.current)return!1;var n=r-(a.current||0),t=r-o.current;return!a.current||n>=(null!=i?i:0)||n<0||s&&t>=x},u=function(n){return f.current=null,h&&l.current?r(n):(l.current=m.current=null,v.current)},e=function(){var r=Date.now();if(t(r))return u(r);if(d.current){var c=r-(a.current||0),f=r-o.current,l=null!=i?i:0-c,m=s?Math.min(l,x-f):l;n(e,m)}},g=function(){for(var u=[],p=0;p<arguments.length;p++)u[p]=arguments[p];var w=Date.now(),h=t(w);if(l.current=u,m.current=c,a.current=w,h){if(!f.current&&d.current)return o.current=a.current,n(e,null!=i?i:0),y?r(a.current):v.current;if(s)return n(e,null!=i?i:0),r(a.current)}return f.current||n(e,null!=i?i:0),v.current};return g.cancel=function(){f.current&&(w?cancelAnimationFrame(f.current):clearTimeout(f.current)),o.current=0,l.current=a.current=m.current=f.current=null},g.isPending=function(){return!!f.current},g.flush=function(){return f.current?u(Date.now()):v.current},g}),[y,s,i,x,h,w]);return g}function i(r,n){return r===n}function a(r){return"function"==typeof r?function(){return r}:r}function o(n,t){var o=t&&t.equalityFn||i,f=function(r){var n=e(a(r)),t=n[0],c=n[1];return[t,u((function(r){return c(a(r))}),[])]}(n),l=f[0],m=f[1],v=c(u((function(r){return m(r)}),[m]),t),p=r(n);return o(p.current,n)||(v(n),p.current=n),[l,v]}export{o as default,c as useDelayedFn};
